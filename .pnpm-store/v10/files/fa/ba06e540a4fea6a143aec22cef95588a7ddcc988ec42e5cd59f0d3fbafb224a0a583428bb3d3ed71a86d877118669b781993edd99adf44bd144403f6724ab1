{"version":3,"sources":["../../src/runtime/webhooks.ts"],"sourcesContent":["/* eslint-disable import/export */\nimport type { VerifyWebhookOptions } from '@clerk/backend/webhooks';\nimport { verifyWebhook as verifyWebhookBase } from '@clerk/backend/webhooks';\nimport type { H3Event } from 'h3';\nimport { toWebRequest } from 'h3';\n\n// @ts-expect-error: Nitro import. Handled by Nuxt.\nimport { useRuntimeConfig } from '#imports';\n\n// Ordering of exports matter here since\n// we're overriding the base verifyWebhook\nexport * from '@clerk/backend/webhooks';\n\n/**\n * Verifies the authenticity of a webhook request using Svix.\n *\n * @param event - The incoming webhook H3 Event object\n * @param options - Optional configuration object\n * @param options.signingSecret - Custom signing secret. If not provided, falls back to NUXT_CLERK_WEBHOOK_SIGNING_SECRET env variable\n * @throws Will throw an error if the webhook signature verification fails\n * @returns A promise that resolves to the verified webhook event data\n *\n * @see {@link https://clerk.com/docs/webhooks/sync-data} to learn more about syncing Clerk data to your application using webhooks\n */\nexport async function verifyWebhook(event: H3Event, options?: VerifyWebhookOptions) {\n  const webRequest = toWebRequest(event);\n  const runtimeConfig = useRuntimeConfig(event);\n  const secret = options?.signingSecret ?? runtimeConfig.clerk.webhookSigningSecret;\n  return verifyWebhookBase(webRequest, {\n    signingSecret: secret,\n  });\n}\n"],"mappings":"AAEA,SAAS,iBAAiB,yBAAyB;AAEnD,SAAS,oBAAoB;AAG7B,SAAS,wBAAwB;AAIjC,cAAc;AAad,eAAsB,cAAc,OAAgB,SAAgC;AAClF,QAAM,aAAa,aAAa,KAAK;AACrC,QAAM,gBAAgB,iBAAiB,KAAK;AAC5C,QAAM,SAAS,SAAS,iBAAiB,cAAc,MAAM;AAC7D,SAAO,kBAAkB,YAAY;AAAA,IACnC,eAAe;AAAA,EACjB,CAAC;AACH;","names":[]}