{"version":3,"sources":["../../../src/runtime/server/utils.ts"],"sourcesContent":["import type { AuthObject } from '@clerk/backend';\nimport { makeAuthObjectSerializable, stripPrivateDataFromObject } from '@clerk/backend/internal';\nimport type { InitialState } from '@clerk/types';\nimport type { H3Event } from 'h3';\nimport { getRequestHeaders, getRequestProtocol } from 'h3';\n\n/**\n * Converts an H3 event into a Fetch Request object.\n */\nexport function toWebRequest(event: H3Event) {\n  const headers = getRequestHeaders(event) as HeadersInit;\n  const protocol = getRequestProtocol(event);\n  const dummyOriginReqUrl = new URL(event.node.req.url || '', `${protocol}://clerk-dummy`);\n  return new Request(dummyOriginReqUrl, {\n    method: event.method,\n    headers: new Headers(headers),\n  });\n}\n\nexport function createInitialState(auth: AuthObject) {\n  const initialState = makeAuthObjectSerializable(stripPrivateDataFromObject(auth));\n  return initialState as unknown as InitialState;\n}\n"],"mappings":"AACA,SAAS,4BAA4B,kCAAkC;AAGvE,SAAS,mBAAmB,0BAA0B;AAK/C,SAAS,aAAa,OAAgB;AAC3C,QAAM,UAAU,kBAAkB,KAAK;AACvC,QAAM,WAAW,mBAAmB,KAAK;AACzC,QAAM,oBAAoB,IAAI,IAAI,MAAM,KAAK,IAAI,OAAO,IAAI,GAAG,QAAQ,gBAAgB;AACvF,SAAO,IAAI,QAAQ,mBAAmB;AAAA,IACpC,QAAQ,MAAM;AAAA,IACd,SAAS,IAAI,QAAQ,OAAO;AAAA,EAC9B,CAAC;AACH;AAEO,SAAS,mBAAmB,MAAkB;AACnD,QAAM,eAAe,2BAA2B,2BAA2B,IAAI,CAAC;AAChF,SAAO;AACT;","names":[]}