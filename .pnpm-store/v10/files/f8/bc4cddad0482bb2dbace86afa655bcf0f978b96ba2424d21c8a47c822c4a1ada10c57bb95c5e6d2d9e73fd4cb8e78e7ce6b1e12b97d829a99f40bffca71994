{"version":3,"sources":["../../src/runtime/plugin.ts"],"sourcesContent":["import { setClerkJsLoadingErrorPackageName } from '@clerk/shared/loadClerkJsScript';\nimport type { InitialState } from '@clerk/types';\nimport { clerkPlugin } from '@clerk/vue';\nimport { setErrorThrowerOptions } from '@clerk/vue/internal';\nimport { defineNuxtPlugin, navigateTo, useRuntimeConfig, useState } from 'nuxt/app';\n\nsetErrorThrowerOptions({ packageName: PACKAGE_NAME });\nsetClerkJsLoadingErrorPackageName(PACKAGE_NAME);\n\nexport default defineNuxtPlugin(nuxtApp => {\n  // SSR-friendly shared state\n  const initialState = useState<InitialState | undefined>('clerk-initial-state', () => undefined);\n\n  if (import.meta.server) {\n    // Save the initial state from server and pass it to the plugin\n    initialState.value = nuxtApp.ssrContext?.event.context.__clerk_initial_state;\n  }\n\n  const runtimeConfig = useRuntimeConfig();\n\n  nuxtApp.vueApp.use(clerkPlugin, {\n    ...(runtimeConfig.public.clerk ?? {}),\n    sdkMetadata: {\n      name: PACKAGE_NAME,\n      version: PACKAGE_VERSION,\n      environment: process.env.NODE_ENV,\n    },\n    routerPush: (to: string) => navigateTo(to),\n    routerReplace: (to: string) => navigateTo(to, { replace: true }),\n    initialState: initialState.value,\n  });\n});\n"],"mappings":"AAAA,SAAS,yCAAyC;AAElD,SAAS,mBAAmB;AAC5B,SAAS,8BAA8B;AACvC,SAAS,kBAAkB,YAAY,kBAAkB,gBAAgB;AAEzE,uBAAuB,EAAE,aAAa,cAAa,CAAC;AACpD,kCAAkC,aAAY;AAE9C,IAAO,iBAAQ,iBAAiB,aAAW;AAEzC,QAAM,eAAe,SAAmC,uBAAuB,MAAM,MAAS;AAE9F,MAAI,YAAY,QAAQ;AAEtB,iBAAa,QAAQ,QAAQ,YAAY,MAAM,QAAQ;AAAA,EACzD;AAEA,QAAM,gBAAgB,iBAAiB;AAEvC,UAAQ,OAAO,IAAI,aAAa;AAAA,IAC9B,GAAI,cAAc,OAAO,SAAS,CAAC;AAAA,IACnC,aAAa;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,MACT,aAAa,QAAQ,IAAI;AAAA,IAC3B;AAAA,IACA,YAAY,CAAC,OAAe,WAAW,EAAE;AAAA,IACzC,eAAe,CAAC,OAAe,WAAW,IAAI,EAAE,SAAS,KAAK,CAAC;AAAA,IAC/D,cAAc,aAAa;AAAA,EAC7B,CAAC;AACH,CAAC;","names":[]}